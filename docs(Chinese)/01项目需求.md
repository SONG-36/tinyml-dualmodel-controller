# 项目需求文档（中文版）

## 1. 项目名称

基于 STM32H750 的语音交互与人脸识别智能控制系统

## 2. 项目背景

​	随着边缘计算的发展，语音控制与人脸识别逐渐从高算力平台走向 MCU 端的轻量级部署，特别是在车载副驾、工业面板、智能终端等场景中，对成本、延迟与本地处理能力提出更高要求。

​	本项目旨在基于 STM32H750 构建一个具备双模型（语音关键词识别 + 人脸检测）推理能力的本地嵌入式 AI 控制系统，兼顾实时性、可靠性与扩展性。

## 3. 项目目标

- ### 技术目标

  - 部署语音关键词识别模型（MFCC + CNN）与人脸检测模型（轻量化 CNN 或 Tiny BlazeFace）
  - 模型全部基于 TensorFlow Lite Micro 推理，采用 int8 量化格式
  - 模型运行于 FreeRTOS 系统，支持多任务调度与系统看门狗监控
  - 系统主要交互方式为 TFT 屏幕状态显示 + 串口输出

  ### 应用目标

  - 支持车载副驾控制面板的语音/图像输入识别
  - 面向工业设备/门禁系统的低功耗嵌入式边缘推理控制器
  - 可迁移为企业级产品原型或教学/展示项目使用

## 4. 使用环境与典型场景

| 场景类型     | 典型要求                               | 本项目匹配点                        |
| ------------ | -------------------------------------- | ----------------------------------- |
| 车载副驾控制 | 响应时间快、低功耗、无网络依赖         | 本地推理 + FreeRTOS 调度 + 模型量化 |
| 工业面板     | 识别驾驶员/操作员，需具备可靠启动机制  | 人脸检测 + 看门狗自恢复机制         |
| 门禁控制     | 静音下识别指令或访客状态，无云连接     | 本地关键词识别 + 灰度图像人脸检测   |
| 教学实验平台 | 结构清晰、代码易读、支持快速部署与移植 | 模块分层、标准 CMake 工程结构       |

## 5. 核心功能模块

- 本地语音关键词识别（支持静音背景/多说话人情况下的触发）
- 人脸检测功能（可判断有无人脸，不做身份识别）
- 串口调试与结果输出
- FreeRTOS 多任务调度系统
- 抽象任务注册结构体数组（便于统一启动/扩展）
- 模型推理接口封装（支持模型类型枚举）

## 6. 系统性能目标

| 指标项           | 目标值                      |
| ---------------- | --------------------------- |
| 模型推理延迟     | < 60ms                      |
| 内存占用         | < 300KB（含中间缓存）       |
| 语音识别准确率   | ≥ 98%（基于GSC测试）        |
| MCU 主频         | 400MHz（STM32H750）         |
| 音频输入特征维度 | 1秒/16KHz/40维 MFCC         |
| 图像输入尺寸     | 96x96 Grayscale（人脸检测） |

## 7. 技术基础与开发工具

- MCU 平台：STM32H750XBH6 + SDRAM
- 摄像头模块：OV5640（70°广角版）
- 显示模块：正点原子 4.3寸 800x480 TFT 屏幕（RGB 接口）
- 操作系统：FreeRTOS（多任务管理）
- 推理框架：TensorFlow Lite Micro（TFLM）
- 模型开发：Python + TensorFlow
- 编译系统：CMake（裸机或 CubeIDE 可选）
- 调试接口：USB CDC / UART 串口

## 8. 项目交付成果

- STM32 工程源码（支持 CMake 构建，含 FreeRTOS 与 TFLM 集成）
- 双模型训练脚本与量化导出流程（语音模型 + 人脸检测模型）
- 中文/英文项目文档（含需求、架构、接口定义、测试报告）
- 系统运行演示视频或截图
- README 展示文档（GitHub 首页）

## 9. 性能可行性分析（评估基础）

- STM32H750 主频 400MHz，支持 SDRAM 外扩，具备运行 TFLM 模型的算力基础；
- 语音模型可基于 Google Speech Commands 数据集，采用 CNN + MFCC 特征，推理耗时在 20~30ms 内；
- 人脸检测可选用 BlazeFace 简化模型或自定义轻量CNN，输入图像尺寸为 96×96（像素，灰度图），在该尺寸下控制推理时间小于 30ms；
- 所有模型均采用 int8 量化方式部署，确保内存占用可控；
- 项目整体运行逻辑采用模块化架构，便于任务裁剪与调度优化；
- 与带 NPU 的芯片（如 K210、RZ/V）相比，STM32H750 提供更强的工程可控性与低功耗部署优势，适合在智能座舱等对稳定性、实时性要求较高的子模块中部署。

## 10. 后续拓展方向

- 增加摄像头支持（使用 OV5640 广角模块）
- 表情识别（微笑/生气）
- 疲劳检测（基于眼部闭合度）
- 姿态估计（通过人脸关键点推导朝向）
- 动态模型切换（支持通过 SD 卡更换模型）
- 添加 BLE / WiFi 模块，构建物联网边缘节点